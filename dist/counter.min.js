!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):(t="undefined"!=typeof globalThis?globalThis:t||self).Counter=i()}(this,(function(){"use strict";class t{constructor(i,{start:s=0,end:e,duration:h=2e3,step:n=1,formatter:r=null,lazy:o=!1,playOnce:a=!1,easing:u="linear",autostart:l=!0}){if(!i)throw new Error("Element is required");if(this.element="string"==typeof i?document.querySelector(i):i,!this.element)throw new Error("Element not found");if(h<=0)throw new Error("Duration must be positive");if(void 0===e)throw new Error("End value is required");if(!t.easingFunctions[u])throw new Error("Invalid easing function");this.start=parseFloat(s),this.end=parseFloat(e),this.duration=h,this.step=parseFloat(n),this.formatter=r||(t=>t),this.autostart=l,this.lazy=o,this.isStopped=!1,this.playOnce=a,this.easing=u,this.listeners=new Map,this.elapsedTime=0,this.lazy?this.observeVisibility():this.autostart&&this.animate()}static easingFunctions={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>t*(2-t),easeInOutQuad:t=>t<.5?2*t*t:(4-2*t)*t-1,easeInCubic:t=>t*t*t,easeOutCubic:t=>--t*t*t+1,easeInOutCubic:t=>t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1,easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t)};animate(){this.isStopped=!1;let i=null;const s=this.start>this.end,e=Math.abs(this.end-this.start),h=n=>{if(this.isStopped)return;i||(i=n-this.elapsedTime,this.startTime=n,this.emit("start"));let r=Math.min((n-i)/this.duration,1);const o=t.easingFunctions[this.easing](r);let a;a=s?Math.max(this.start-e*o,this.end):Math.min(this.start+e*o,this.end),0!==this.step&&(a=Math.round(a/this.step)*this.step);const u=this.formatter(a,r);this.element.textContent=u,this.emit("update",a),r<1?requestAnimationFrame(h):(this.emit("complete"),this.elapsedTime=0)};requestAnimationFrame(h)}observeVisibility(){this.observer=new IntersectionObserver((t=>{t.forEach((t=>{t.isIntersecting&&(this.playOnce&&this.observer.unobserve(this.element),this.animate())}))})),this.observer.observe(this.element)}stop(){this.isStopped||(this.isStopped=!0,null!==this.startTime&&(this.elapsedTime+=performance.now()-this.startTime))}resume(){this.isStopped&&this.animate()}reset(){this.elapsedTime=0,this.startTime=null,this.isStopped=!1,this.element.textContent=this.start}destroy(){this.stop(),this.observer&&this.observer.disconnect(),this.listeners.clear()}on(t,i){this.listeners.has(t)||this.listeners.set(t,new Set),this.listeners.get(t).add(i)}off(t,i){this.listeners.has(t)&&this.listeners.get(t).delete(i)}emit(t,i){this.listeners.has(t)&&this.listeners.get(t).forEach((t=>t(i)))}}return t}));
